# LD2450 Zigbee Sensor - Plotly Graph Card
# Visualizes target positions and zone boundaries in real-time
#
# Based on: Anthony Hua's LD2450-map-chart.yaml
# https://github.com/athua/ha-utils/blob/main/LD2450-map-chart.yaml
# Modified for Zigbee entity naming and 5-zone support
#
# Prerequisites:
# - Plotly Graph Card installed via HACS
# - Replace YOUR_DEVICE_ID with your Zigbee device IEEE address
#
type: custom:plotly-graph
title: mmWave Radar Sensor
refresh_interval: 1
hours_to_show: current_day
layout:
  height: 520
  margin:
    l: 50
    r: 20
    t: 20
    b: 40
  showlegend: true
  xaxis:
    dtick: 1
    gridcolor: RGBA(200,200,200,0.15)
    zerolinecolor: RGBA(200,200,200,0.15)
    type: number
    fixedrange: true
    range:
      - -6
      - 6
  yaxis:
    dtick: 1
    gridcolor: RGBA(200,200,200,0.15)
    zerolinecolor: RGBA(200,200,200,0.15)
    scaleanchor: x
    scaleratio: 1
    fixedrange: true
    range:
      - 6
      - 0
entities:
  - entity: ""
    name: Target1
    marker:
      size: 12
    line:
      shape: spline
      width: 5
    x:
      - $ex hass.states["sensor.YOUR_DEVICE_ID_target_1_x"].state /1
    "y":
      - $ex hass.states["sensor.YOUR_DEVICE_ID_target_1_y"].state /1
  - entity: ""
    name: Target2
    marker:
      size: 12
    line:
      shape: spline
      width: 5
    x:
      - $ex hass.states["sensor.YOUR_DEVICE_ID_target_2_x"].state /1
    "y":
      - $ex hass.states["sensor.YOUR_DEVICE_ID_target_2_y"].state /1
  - entity: ""
    name: Target3
    marker:
      size: 12
    line:
      shape: spline
      width: 5
    x:
      - $ex hass.states["sensor.YOUR_DEVICE_ID_target_3_x"].state /1
    "y":
      - $ex hass.states["sensor.YOUR_DEVICE_ID_target_3_y"].state /1
  - entity: ""
    name: Zone1
    mode: lines
    fill: toself
    fillcolor: RGBA(20,200,0,0.1)
    line:
      color: RGBA(20,200,0,0.2)
      shape: line
      width: 2
    x:
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_1_x1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_1_x2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_1_x3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_1_x4"].state /1
    "y":
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_1_y1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_1_y2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_1_y3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_1_y4"].state /1
  - entity: ""
    name: Zone2
    mode: lines
    fill: toself
    fillcolor: RGBA(200,0,255,0.1)
    line:
      color: RGBA(200,0,255,0.2)
      shape: line
      width: 2
    x:
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_2_x1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_2_x2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_2_x3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_2_x4"].state /1
    "y":
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_2_y1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_2_y2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_2_y3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_2_y4"].state /1
  - entity: ""
    name: Zone3
    mode: lines
    fill: toself
    fillcolor: RGBA(200,120,55,0.1)
    line:
      color: RGBA(200,120,55,0.2)
      shape: line
      width: 2
    x:
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_3_x1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_3_x2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_3_x3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_3_x4"].state /1
    "y":
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_3_y1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_3_y2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_3_y3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_3_y4"].state /1
  - entity: ""
    name: Zone4
    mode: lines
    fill: toself
    fillcolor: RGBA(200,250,55,0.3)
    line:
      color: RGBA(200,220,55,0.2)
      shape: line
      width: 2
    x:
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_4_x1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_4_x2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_4_x3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_4_x4"].state /1
    "y":
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_4_y1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_4_y2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_4_y3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_4_y4"].state /1
  - entity: ""
    name: Zone5
    mode: lines
    fill: toself
    fillcolor: RGBA(120,75,55,0.4)
    line:
      color: RGBA(120,55,55,0.4)
      shape: line
      width: 2
    x:
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_5_x1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_5_x2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_5_x3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_5_x4"].state /1
    "y":
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_5_y1"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_5_y2"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_5_y3"].state /1
      - $ex hass.states["number.YOUR_DEVICE_ID_zone_5_y4"].state /1
  - entity: ""
    name: Coverage
    mode: lines
    fill: tonexty
    fillcolor: rgba(168, 216, 234, 0.15)
    line:
      shape: line
      width: 1
      dash: dot
    x:
      - 0
      - $ex 600 * Math.sin((2 * Math.PI)/360 * 60)
      - 450
      - 400
      - 300
      - 200
      - 100
      - 0
      - -100
      - -200
      - -300
      - -400
      - -450
      - $ex -600 * Math.sin((2 * Math.PI)/360 * 60)
      - 0
    "y":
      - 0
      - $ex 600 * Math.cos((2 * Math.PI)/360 * 60)
      - $ex Math.sqrt( 600**2 - 450**2 )
      - $ex Math.sqrt( 600**2 - 400**2 )
      - $ex Math.sqrt( 600**2 - 300**2 )
      - $ex Math.sqrt( 600**2 - 200**2 )
      - $ex Math.sqrt( 600**2 - 100**2 )
      - 600
      - $ex Math.sqrt( 600**2 - 100**2 )
      - $ex Math.sqrt( 600**2 - 200**2 )
      - $ex Math.sqrt( 600**2 - 300**2 )
      - $ex Math.sqrt( 600**2 - 400**2 )
      - $ex Math.sqrt( 600**2 - 450**2 )
      - $ex 600 * Math.cos((2 * Math.PI)/360 * 60)
      - 0
raw_plotly_config: true
grid_options:
  columns: full

